<?xml version="1.0" encoding="UTF-8"?>
	<beans xmlns="http://www.springframework.org/schema/beans"
	  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	  xmlns:p="http://www.springframework.org/schema/p"
	  xmlns:context="http://www.springframework.org/schema/context"
	  xmlns:mvc="http://www.springframework.org/schema/mvc"
	  xsi:schemaLocation="
	    http://www.springframework.org/schema/beans 
	    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd 
	    http://www.springframework.org/schema/context
	    http://www.springframework.org/schema/context/spring-context-3.0.xsd
	    http://www.springframework.org/schema/mvc 
	    http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd" default-lazy-init="false">	
	
		
	<!-- CONTROLLERS -->
	<!-- Configures the @Controller programming model -->
	<context:component-scan base-package="com.m4f.web.controller"/>
	<!--   -->
	<!-- <bean id="baseController" class="com.m4f.web.controller.BaseController" ></bean>  
	<bean id="adminController" class="com.m4f.web.controller.users.AdminController" ></bean>
	<bean id="catalogController" class="com.m4f.web.controller.CatalogController" ></bean>
	<bean id="dumpController" class="com.m4f.web.controller.DumpController" ></bean>
	<bean id="errorController" class="com.m4f.web.controller.ErrorController" ></bean>
	<bean id="homeController" class="com.m4f.web.controller.HomeController" ></bean>
	<bean id="i18nController" class="com.m4f.web.controller.I18nController" ></bean>
	<bean id="loginController" class="com.m4f.web.controller.LoginController" ></bean>
	<bean id="searchController" class="com.m4f.web.controller.SearchController" ></bean>
	
	<bean id="launcherController" class="com.m4f.web.controller.cron.LauncherController" ></bean>
	
	<bean id="extendedHomeController" class="com.m4f.web.controller.extended.ExtendedHomeControler" ></bean>
	
	<bean id="providerController" class="com.m4f.web.controller.model.ProviderController" ></bean>
	<bean id="mediationServiceController" class="com.m4f.web.controller.model.MediationServiceController" ></bean>
	<bean id="inboxController" class="com.m4f.web.controller.model.InboxController" ></bean>
	<bean id="extendedSchoolController" class="com.m4f.web.controller.model.ExtendedSchoolController" ></bean>
	<bean id="extendedCourseController" class="com.m4f.web.controller.model.ExtendedCourseController" ></bean>
	<bean id="courseController" class="com.m4f.web.controller.model.CourseController" ></bean>
	<bean id="provinceController" class="com.m4f.web.controller.model.ProvinceController" ></bean>
	<bean id="regionController" class="com.m4f.web.controller.model.RegionController" ></bean>
	<bean id="schoolController" class="com.m4f.web.controller.model.SchoolController" ></bean>
	<bean id="townController" class="com.m4f.web.controller.model.TownController" ></bean>
	<bean id="tutorialController" class="com.m4f.web.controller.model.TutorialController" ></bean>
	<bean id="userController" class="com.m4f.web.controller.model.UserController" ></bean>
	
	<bean id="todayController" class="com.m4f.web.controller.summary.TodayController" ></bean>
	
	<bean id="publisherController" class="com.m4f.web.controller.task.PublisherController" ></bean>
	<bean id="taskController" class="com.m4f.web.controller.task.TaskController" ></bean>
	
	<bean id="mediatorController" class="com.m4f.web.controller.users.MediatorController" ></bean>-->
	<!-- <bean id="schoolCatalogController" class="com.m4f.web.controller.task.batch.SchoolCatalogTask" ></bean>  -->
	<!-- FIN CONTROLLERS -->
	
	<!-- Creates the JSR-303 Validator -->
	<bean id="validator" class="org.springframework.validation.beanvalidation.LocalValidatorFactoryBean"/>
	
	
	<bean id="messageAdapter" class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter">
        <property name="messageConverters">
            <list>
                <!-- Support JSON --> 
                <bean class="org.springframework.http.converter.json.MappingJacksonHttpMessageConverter"/>
            </list>
        </property>
        <!-- Necessary To run in gae. -->
        <property name="webBindingInitializer">
                <bean class="com.m4f.web.bind.TheFocusBindingInitializer">
                	<property name="validator" ref="validator"/>
                </bean>
        </property>
    </bean>
	
	 <bean class="org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping"/>  
 
	<mvc:annotation-driven/>

	
	<!-- Creates the multipart uploader component -->
	<bean id="multipartResolver" class="com.m4f.web.fileupload.CommonsStreamMultipartResolver">
    	<!-- one of the properties available; the maximum file size in mega bytes -->
    	<constructor-arg index="0"><value>2</value></constructor-arg>
	</bean>

	
	
	<!-- Configures Handler Interceptors -->	
	<mvc:interceptors>
		<!-- Changes the locale when a 'locale' request parameter is sent; e.g. /?lang=de -->
		<bean class="org.springframework.web.servlet.i18n.LocaleChangeInterceptor" >
			<property name="paramName" value="lang" />
		</bean>
		
		<!--  
		<mvc:interceptor>
        	<mvc:mapping path="/catalog/course/detail/*"/>
        	<bean class="com.m4f.web.request.CourseDetailInterceptor"/>
    	</mvc:interceptor>
		-->
		
	</mvc:interceptors>

	<!-- Saves a locale change using a session -->
	<bean id="localeResolver" class="org.springframework.web.servlet.i18n.SessionLocaleResolver"/>
	 
	 <bean id="viewResolver" class="org.springframework.web.servlet.view.tiles2.TilesViewResolver">
    	<property name="viewClass"><value>org.springframework.web.servlet.view.tiles2.TilesView</value></property>
    	<property name="requestContextAttribute"><value>rc</value></property>
	</bean>
	
	<bean id="tilesConfigurer" class="org.springframework.web.servlet.view.tiles2.TilesConfigurer">
		<property name="definitions">
			<list>
				<value>/WEB-INF/tiles.xml</value>
			</list>
		</property>
	</bean>
	
</beans>
